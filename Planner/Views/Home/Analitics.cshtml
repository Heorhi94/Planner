@*@model List<Planner.Models.Domain.WeekDay>

@{
    ViewData["Title"] = "Home Page";
}

<div class="container col-xxl-8 px-4 py-5">
    <div class="row align-items-center g-5 ry-5">
        <div class="col-12 col-lg-6">
            <h1 class="display-5 fw-bold lh-1 mb-3">
                Laboratorium Radionuclids
            </h1>
            <p class="lead">
                History patients
            </p>
        </div>
        <div class="col-12 col-lg-6">
            <img src="https://images.pexels.com/photos/1193743/pexels-photo-1193743.jpeg?auto=compress&cs=tinysrgb&w=600"
                 alt="Week Day - Laboratorium radiations"
                 class="d-block mx-lg-auto img-fluid" width="300" />
        </div>
    </div>
</div>


<div class="container">
    <div class="row justify-content-center">
        <div class="row">
            @if (Model != null && Model.Any())
            {
                @foreach (var weekDay in Model)
                {
                    <div class="col">
                        <div class="mb-5 bg-light box-shadow">
                            <h2 class="mb-2 small">Day: @weekDay.Day.ToShortDateString() </h2>
                            <h2 class="mb-2 small">Activity Day : @weekDay.ActivityDay </h2>
                            <h2 class="mb-2 small">Quantity MBK : @weekDay.QuantityMbK </h2>
                            <h2 class="mb-2 small">Remainder MBK : @weekDay.RemainderMBK </h2>

                            <div class="container py-5">
                                Patients
                                @if (weekDay.Patients != null)
                                {
                                    @foreach (var people in weekDay.Patients)
                                    {
                                        <table class="table">
                                            <thread>
                                                <tr>
                                                    <th><small>@people.Name</small></th>
                                                    <th><small>@people.Surname</small></th>
                                                    <th><small>@people.BirthDay</small></th>
                                                    <th><small>@people.Research</small></th>

                                                </tr>
                                            </thread>
                                        </table>
                                    }
                                }
                                else
                                {
                                    <p>No Patient found!</p>
                                }
                            </div>
                        </div>
                    </div>

                }
            }

        </div>
    </div>
</div>
*@




@model List<Planner.Models.Domain.WeekDay>
@using Microsoft.AspNetCore.Mvc.ViewFeatures


@{
    ViewData["Title"] = "Home Page";
    Layout = null; 
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>

<div style="width: 80%; margin: auto;">
    <canvas id="myChart"></canvas>
</div>

<script>
    var days = @Html.Raw(Json.Serialize((Model.Select(w => w.Day.ToShortDateString()))));
    var activityDays = @Html.Raw(Json.Serialize((Model.Select(w => w.ActivityDay))));
   // var countRessearch = @Html.Raw(Json.Serialize(Model.Select(x => x.NumberOfPatients)));
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: days,
            datasets: [{
                label: 'Activity Days',
                data: activityDays,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
